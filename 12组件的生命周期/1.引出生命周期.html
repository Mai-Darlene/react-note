<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>引出生命周期</title>
</head>
<body>
<div id="test"></div>

<!--引入React核心库-->
<script type="text/javascript" src="../js/16.8.0/react.development.js"></script>
<!--引入React-dom，用于支持react操作Dom-->
<script type="text/javascript" src="../js/16.8.0/react-dom.development.js"></script>
<!--引入babel，用于讲jsx转为js-->
<script type="text/javascript" src="../js/16.8.0/babel.min.js"></script>

<script type="text/babel"> /* 此处一定要写babel */
// 1.创建组件
class Life extends React.Component{
    state = {
        opacity: 1
    }
    Death = () => {

        //卸载组件
        ReactDOM.unmountComponentAtNode(document.getElementById('test'))
    }
    //组件挂载页面之后调用（组件挂在完毕）
    componentDidMount() {
        this.timer = setInterval(() => {
            let {opacity} = this.state
            opacity -= 0.1
            if(opacity <=0) opacity = 1
            this.setState({opacity})
        }, 200)
    }
    componentWillUnmount() {
        //清除定时器
        clearInterval(this.timer)
    }
    // render调用的时机：初始化渲染，状态更新后
    render() {
        return (
            <div>
                <h2 style={{opacity: this.state.opacity}}>学不会react怎么办</h2>
                <button onClick={this.death}>不活了</button>
            </div>
        )
    }
}
ReactDOM.render(<Life/>, document.getElementById('test'))
</script>
</body>
</html>